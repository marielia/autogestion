<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 02-oct-2009 17:54:52 by Hibernate Tools 3.2.0.beta7 -->
<hibernate-mapping>
    <class name="com.refinor.extranet.data.MlibroDiarioImpresion" table="MLibroDiarioImpresion" schema="dbo">
        <id name="id" type="long">
            <column name="id" precision="18" scale="0" />
            <generator class="identity" />
        </id>
        <property name="fechaAlta" type="timestamp">
            <column name="fecha_alta" length="23" />
        </property>
        <property name="mes" type="string">
            <column name="mes" length="2" />
        </property>
        <property name="anio" type="string">
            <column name="anio" length="4" />
        </property>
        <property name="usuario" type="java.lang.Long">
            <column name="usuario" precision="10" scale="0" />
        </property>
        <property name="nroPaginaInicio" type="java.lang.Long">
            <column name="nro_pagina_inicio" precision="18" scale="0" />
        </property>
        <property name="nroPaginaFin" type="java.lang.Long">
            <column name="nro_pagina_fin" precision="18" scale="0" />
        </property>
        <property name="cantidadPaginas" type="java.lang.Long">
            <column name="cantidad_paginas" precision="18" scale="0" />
        </property>
        <property name="cantidadLineasPaginas" type="java.lang.Integer">
            <column name="cantidad_lineas_paginas" />
        </property>
    </class>
    
    <sql-query name="finUltimaImpresion">
     <![CDATA[ 	
	    select top 1 
		anio as anioPerdiodoAnterior,
		mes as mesPeriodoAnterior,
		nro_pagina_inicio as nroPaginaInicioAnterior,
		nro_pagina_fin as nroPaginaFinAnterior,
		DATEADD(month, 1, convert(datetime, '01/'+ mes+'/'+anio, 103)) as periodoActualConsulta,
		nro_pagina_fin+1 as nroPaginaInicioActual
		from mlibrodiarioimpresion
		order by anio desc,mes desc
		]]>
	 </sql-query>
	
    
</hibernate-mapping>
