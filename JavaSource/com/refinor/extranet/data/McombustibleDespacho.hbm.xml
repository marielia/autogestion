<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 22-may-2008 14:13:11 by Hibernate Tools 3.2.0.beta7 -->
<hibernate-mapping>
    <class name="com.refinor.extranet.data.McombustibleDespacho" table="MCombustibleDespacho" schema="dbo" >
        <id name="id" type="long">
            <column name="id" precision="18" scale="0" />
            <generator class="assigned" />
        </id>
        <property name="ccssid" type="java.lang.Integer">
            <column name="CCSSId" />
        </property>
        <property name="codArticulo" type="java.lang.Long">
            <column name="CodArticulo" precision="18" scale="0" />
        </property>
        <property name="litros" type="big_decimal">
            <column name="Litros" precision="14" />
        </property>
        <property name="fecha" type="timestamp">
            <column name="Fecha" length="23" />
        </property>
        <property name="tipoComprobante" type="java.lang.Integer">
            <column name="TipoComprobante" />
        </property>
        <property name="letraComprobante" type="java.lang.Character">
            <column name="LetraComprobante" length="1" />
        </property>
        <property name="nroComprobante" type="java.lang.Long">
            <column name="NroComprobante" precision="18" scale="0" />
        </property>
        <property name="estado" type="java.lang.Integer">
            <column name="Estado" />
        </property>
        <property name="responsable" type="java.lang.Long">
            <column name="Responsable" precision="18" scale="0" />
        </property>
        <property name="rowguid" type="string">
            <column name="rowguid" length="36" not-null="true" unique="true" />
        </property>

    </class>
    
    <sql-query name="findCombustibles">
    	<query-param name="fechaDesde" type="timestamp"/>
	    <query-param name="fechaHasta" type="timestamp"/>  
	    <query-param name="codCcss" type="integer"/>
	    <query-param name="codProducto" type="integer"/>
        <query-param name="tipoComprobante" type="integer"/>
        <query-param name="estado" type="integer"/>
	    
	    
			select 
			
			c.id as id,
			c.ccssid as ccssId,
			cs.desc_ccss as centroDesc,
			c.codArticulo as articuloId,
			a.descripcion as articuloDesc,
			c.litros,
			c.fecha,
			c.tipoComprobante,
			t.nombre,
			c.letraComprobante,
			c.nroComprobante,
			c.estado,
			c.responsable
			
			from McombustibleDespacho c,
			mArticulos a, mccss cs, tipoComprobante t
			
			
			where 
			a.codigo = c.codArticulo and
			(c.codArticulo = :codProducto or :codProducto = -1) and
			cs.cod_ccss = c.ccssId and
			(c.ccssId = :codCcss or :codCcss = -1) and 
			t.id= c.tipoComprobante and
			(c.tipoComprobante = :tipoComprobante or :tipoComprobante = -1) and 			
			(c.estado = :estado or (:estado = -1 and c.estado > -1)) and
			(c.fecha between :fechaDesde and :fechaHasta or  :fechaDesde is  null  and :fechaHasta is null)
			order by fecha
</sql-query>
</hibernate-mapping>
